<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type='text/css' href="style1.css">
        <title></title>
        <title>Karten</title>
    </head>

    <body>
        <div class="flex-container">
            <h1 class="flex-item"><a href="https://travelmap1312.herokuapp.com/karte">Travelmap</a></h1>
            <header class="column">
                <a class="flex-item" id="hlogin" href="https://travelmap1312.herokuapp.com/">Login</a>
            </header>
            <div class="flex-item" id="box">
                <form class="column">
                    <label for="email">E-Mail:</label>
                    <input type="email" id="email" name="email" required>
                    <label for="password">Passwort:</label>
                    <input type="password" id="pwd1" name="pwd" required>
                    <label for="password">Wiederhole Passwort:</label>
                    <input type="password" id="pwd2" name="pwd" required>
                    <input type="button" onclick="reg()" value="Registrieren" />
                </form>
            </div>
        </div>
        <script>
            


            const requestReg = (email, passwort) => {

                return fetch("https://travelmap1312.herokuapp.com/createUser", {
                    method: "POST",
                    mode: 'cors',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email: email, password: passwort })
                })
                .then(result => result.json())
                .then(json => json)
            }

            async function reg(){
                let email = document.getElementById('email').value;
                let pwd1 = document.getElementById('pwd1').value;
                let pwd2 = document.getElementById('pwd2').value;
            
                if(pwd1===pwd2){
                    var log = requestReg(email, pwd1);
                }
                if(log.wasCreated === true){
                    document.getElementById("box").innerHTML = '<p class = flex-item">Wir haben dir eine E-Mail mit einem Best√§tigungslink gesendet</p>';
                }
            }


        </script>

    </body>

</html>